<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ancient Earth - Realistic Continental Drift</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/ancient-earth.css">
    
    <style>
        #globeViz {
            background: #000033;
        }
        .info-box {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Raleway', sans-serif;
            max-width: 300px;
        }
        .time-display {
            font-size: 24px;
            font-weight: 600;
        }
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <nav class="nav">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <span class="logo-text">Deep Time Whispers</span>
                </div>
            </div>
        </div>
    </nav>

    <section class="ancient-earth-hero">
        <div class="container">
            <h1 class="page-title">Realistic Continental Drift</h1>
            <p class="page-subtitle">Watch Earth's continents move through 750 million years</p>
        </div>
    </section>

    <section class="ancient-earth-main">
        <div class="ancient-earth-layout">
            <div class="controls-panel">
                <h3>Time Period</h3>
                <div class="time-slider-container">
                    <input type="range" id="timeSlider" class="time-slider" min="0" max="750" value="0" step="10">
                    <div class="time-display">
                        <span id="timeValue">Present Day</span>
                        <span id="myaValue" class="mya-value">0 MYA</span>
                    </div>
                </div>

                <div class="quick-jumps">
                    <h4>Quick Jumps</h4>
                    <button class="period-btn active" onclick="jumpToTime(0)">Present</button>
                    <button class="period-btn" onclick="jumpToTime(65)">K-T Extinction</button>
                    <button class="period-btn" onclick="jumpToTime(150)">Jurassic</button>
                    <button class="period-btn" onclick="jumpToTime(200)">Pangaea</button>
                    <button class="period-btn" onclick="jumpToTime(300)">Coal Forests</button>
                    <button class="period-btn" onclick="jumpToTime(450)">Ordovician</button>
                    <button class="period-btn" onclick="jumpToTime(540)">Cambrian</button>
                    <button class="period-btn" onclick="jumpToTime(750)">Snowball Earth</button>
                </div>

                <div class="info-box" style="position: static; margin-top: 20px;">
                    <h4>Animation Controls</h4>
                    <button onclick="playAnimation()" style="background: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 4px; margin: 5px;">
                        ▶️ Play Animation
                    </button>
                    <button onclick="stopAnimation()" style="background: #f44336; color: white; border: none; padding: 10px 20px; border-radius: 4px; margin: 5px;">
                        ⏸ Stop
                    </button>
                </div>
            </div>

            <div class="globe-container">
                <div id="globeViz">
                    <div class="loading">Loading continental data...</div>
                </div>
                <div class="info-box">
                    <h4 id="periodName">Present Day</h4>
                    <p id="periodDesc">Modern continental configuration</p>
                </div>
            </div>
        </div>
    </section>

    <script src="//unpkg.com/globe.gl"></script>
    <script src="//unpkg.com/topojson@3"></script>
    <script>
        let globe;
        let currentTime = 0;
        let animationInterval = null;
        
        // Detailed continent shapes for different time periods
        // These would ideally come from a paleographic database, but we'll create realistic approximations
        const continentConfigs = {
            0: {
                name: "Present Day",
                desc: "Seven continents in their current positions",
                continents: [
                    {
                        name: "North America",
                        color: "#228B22",
                        coords: [[
                            [-170, 71], [-170, 53], [-165, 58], [-165, 65], [-155, 70], [-140, 70],
                            [-130, 70], [-120, 70], [-110, 70], [-100, 70], [-90, 70], [-80, 70],
                            [-75, 68], [-70, 65], [-65, 60], [-60, 55], [-55, 50], [-52, 45],
                            [-65, 45], [-70, 42], [-75, 40], [-80, 38], [-82, 35], [-83, 30],
                            [-85, 28], [-87, 25], [-90, 22], [-95, 20], [-97, 22], [-98, 25],
                            [-100, 28], [-105, 30], [-110, 32], [-115, 33], [-120, 35], [-125, 40],
                            [-125, 45], [-125, 50], [-130, 55], [-135, 58], [-140, 60], [-145, 62],
                            [-150, 65], [-155, 68], [-160, 70], [-165, 71], [-170, 71]
                        ]]
                    },
                    {
                        name: "South America",
                        color: "#32CD32",
                        coords: [[
                            [-80, 10], [-78, 8], [-77, 5], [-76, 2], [-75, -2], [-73, -5],
                            [-72, -8], [-71, -12], [-70, -15], [-69, -18], [-68, -22], [-67, -25],
                            [-66, -28], [-65, -32], [-64, -35], [-63, -38], [-62, -40], [-61, -42],
                            [-60, -45], [-58, -48], [-57, -50], [-55, -52], [-53, -53], [-50, -52],
                            [-48, -50], [-45, -48], [-42, -45], [-40, -42], [-38, -40], [-36, -37],
                            [-35, -35], [-34, -32], [-35, -28], [-36, -25], [-37, -22], [-38, -18],
                            [-39, -15], [-40, -12], [-41, -8], [-42, -5], [-43, -2], [-45, 0],
                            [-48, 2], [-50, 4], [-52, 5], [-55, 6], [-58, 7], [-60, 8],
                            [-65, 9], [-70, 10], [-75, 10], [-80, 10]
                        ]]
                    },
                    {
                        name: "Africa",
                        color: "#8B4513",
                        coords: [[
                            [-17, 35], [-15, 37], [-10, 37], [-5, 36], [0, 36], [5, 37],
                            [10, 37], [12, 35], [15, 32], [18, 30], [20, 28], [25, 25],
                            [30, 22], [33, 20], [35, 18], [38, 15], [40, 12], [42, 10],
                            [44, 8], [45, 5], [47, 2], [48, 0], [49, -2], [50, -5],
                            [51, -8], [50, -12], [48, -15], [45, -18], [42, -20], [40, -22],
                            [38, -25], [35, -28], [32, -30], [28, -32], [25, -34], [20, -35],
                            [18, -34], [17, -32], [16, -30], [15, -28], [14, -25], [13, -22],
                            [12, -20], [11, -18], [10, -15], [8, -12], [6, -10], [4, -8],
                            [2, -5], [0, -3], [-2, 0], [-4, 2], [-6, 5], [-8, 8],
                            [-10, 10], [-12, 12], [-14, 15], [-15, 18], [-16, 20], [-17, 22],
                            [-18, 25], [-18, 28], [-18, 30], [-17, 32], [-17, 35]
                        ]]
                    },
                    {
                        name: "Europe",
                        color: "#2E8B57",
                        coords: [[
                            [-10, 71], [-5, 71], [0, 70], [5, 69], [10, 68], [15, 67],
                            [20, 66], [25, 65], [30, 64], [35, 63], [40, 62], [45, 60],
                            [50, 58], [55, 56], [60, 54], [58, 52], [55, 50], [52, 48],
                            [48, 46], [45, 45], [42, 43], [40, 42], [35, 40], [30, 38],
                            [25, 36], [20, 35], [15, 36], [10, 38], [5, 40], [0, 42],
                            [-5, 44], [-8, 48], [-10, 52], [-10, 56], [-10, 60], [-10, 65],
                            [-10, 68], [-10, 71]
                        ]]
                    },
                    {
                        name: "Asia",
                        color: "#006400",
                        coords: [[
                            [25, 65], [30, 64], [35, 63], [40, 62], [45, 60], [50, 58],
                            [55, 56], [60, 54], [65, 52], [70, 50], [75, 48], [80, 45],
                            [85, 42], [90, 40], [95, 38], [100, 35], [105, 32], [110, 30],
                            [115, 28], [120, 25], [125, 22], [130, 20], [135, 18], [140, 15],
                            [145, 20], [150, 25], [155, 30], [160, 35], [165, 40], [170, 45],
                            [175, 50], [180, 55], [175, 60], [170, 65], [165, 70], [160, 72],
                            [155, 73], [150, 74], [145, 75], [140, 75], [135, 74], [130, 73],
                            [125, 72], [120, 71], [115, 70], [110, 69], [105, 68], [100, 67],
                            [95, 66], [90, 65], [85, 64], [80, 63], [75, 62], [70, 61],
                            [65, 60], [60, 59], [55, 60], [50, 61], [45, 62], [40, 63],
                            [35, 64], [30, 65], [25, 65]
                        ]]
                    },
                    {
                        name: "Australia",
                        color: "#DAA520",
                        coords: [[
                            [110, -10], [115, -12], [120, -14], [125, -16], [130, -18], [135, -20],
                            [140, -22], [145, -25], [150, -28], [153, -32], [155, -35], [153, -38],
                            [150, -40], [147, -42], [145, -43], [142, -42], [140, -40], [137, -38],
                            [135, -36], [132, -34], [130, -32], [127, -30], [125, -28], [122, -26],
                            [120, -24], [117, -22], [115, -20], [112, -18], [110, -15], [110, -10]
                        ]]
                    },
                    {
                        name: "Antarctica",
                        color: "#E0E0E0",
                        coords: [[
                            [0, -70], [30, -70], [60, -70], [90, -70], [120, -70], [150, -70],
                            [180, -70], [-150, -70], [-120, -70], [-90, -70], [-60, -70], [-30, -70],
                            [0, -70]
                        ]]
                    }
                ]
            },
            65: {
                name: "Late Cretaceous",
                desc: "Just before the dinosaur extinction",
                continents: [
                    {
                        name: "North America",
                        color: "#228B22",
                        coords: [[
                            [-160, 65], [-155, 60], [-150, 55], [-145, 50], [-140, 45], [-135, 40],
                            [-130, 35], [-125, 32], [-120, 30], [-115, 28], [-110, 26], [-105, 25],
                            [-100, 24], [-95, 23], [-90, 25], [-85, 28], [-80, 32], [-75, 35],
                            [-70, 40], [-65, 45], [-60, 50], [-55, 55], [-50, 60], [-55, 63],
                            [-60, 65], [-65, 67], [-70, 68], [-75, 69], [-80, 70], [-90, 70],
                            [-100, 70], [-110, 69], [-120, 68], [-130, 67], [-140, 66], [-150, 65],
                            [-160, 65]
                        ]]
                    },
                    {
                        name: "South America",
                        color: "#32CD32",
                        coords: [[
                            [-70, 5], [-68, 2], [-66, -2], [-64, -5], [-62, -8], [-60, -12],
                            [-58, -15], [-56, -18], [-54, -22], [-52, -25], [-50, -28], [-48, -32],
                            [-46, -35], [-44, -38], [-42, -42], [-40, -45], [-38, -48], [-35, -50],
                            [-32, -48], [-30, -45], [-28, -42], [-26, -38], [-25, -35], [-24, -32],
                            [-25, -28], [-26, -25], [-28, -22], [-30, -18], [-32, -15], [-35, -12],
                            [-38, -8], [-40, -5], [-42, -2], [-45, 0], [-48, 2], [-52, 4],
                            [-55, 5], [-60, 6], [-65, 6], [-70, 5]
                        ]]
                    },
                    {
                        name: "Africa",
                        color: "#8B4513",
                        coords: [[
                            [-10, 30], [-5, 32], [0, 33], [5, 34], [10, 35], [15, 33],
                            [20, 30], [25, 27], [30, 24], [35, 20], [40, 16], [43, 12],
                            [45, 8], [46, 4], [47, 0], [48, -4], [49, -8], [48, -12],
                            [46, -16], [44, -20], [42, -24], [38, -28], [34, -32], [30, -35],
                            [25, -37], [20, -38], [15, -37], [10, -35], [5, -32], [0, -28],
                            [-5, -24], [-8, -20], [-10, -16], [-12, -12], [-13, -8], [-14, -4],
                            [-15, 0], [-16, 4], [-17, 8], [-18, 12], [-18, 16], [-17, 20],
                            [-16, 24], [-14, 27], [-12, 29], [-10, 30]
                        ]]
                    }
                ]
            },
            150: {
                name: "Jurassic Period",
                desc: "Height of the dinosaurs, continents beginning to separate",
                continents: [
                    {
                        name: "Laurasia",
                        color: "#2E8B57",
                        coords: [[
                            [-120, 60], [-110, 58], [-100, 56], [-90, 54], [-80, 52], [-70, 50],
                            [-60, 48], [-50, 46], [-40, 44], [-30, 42], [-20, 40], [-10, 38],
                            [0, 36], [10, 34], [20, 32], [30, 30], [40, 28], [50, 26],
                            [60, 24], [70, 22], [80, 20], [90, 22], [100, 24], [110, 26],
                            [120, 28], [130, 30], [140, 32], [150, 35], [160, 38], [170, 42],
                            [180, 45], [170, 48], [160, 52], [150, 55], [140, 58], [130, 60],
                            [120, 62], [110, 64], [100, 65], [90, 66], [80, 67], [70, 68],
                            [60, 69], [50, 70], [40, 70], [30, 69], [20, 68], [10, 67],
                            [0, 66], [-10, 65], [-20, 64], [-30, 63], [-40, 62], [-50, 61],
                            [-60, 60], [-70, 60], [-80, 60], [-90, 60], [-100, 60], [-110, 60],
                            [-120, 60]
                        ]]
                    },
                    {
                        name: "Gondwana",
                        color: "#8B4513",
                        coords: [[
                            [-60, 20], [-50, 15], [-40, 10], [-30, 5], [-20, 0], [-10, -5],
                            [0, -10], [10, -15], [20, -20], [30, -25], [40, -30], [50, -35],
                            [60, -40], [70, -42], [80, -44], [90, -45], [100, -44], [110, -42],
                            [120, -40], [130, -35], [140, -30], [150, -25], [160, -20], [170, -15],
                            [180, -10], [170, -5], [160, 0], [150, 5], [140, 10], [130, 15],
                            [120, 18], [110, 20], [100, 22], [90, 23], [80, 24], [70, 25],
                            [60, 25], [50, 24], [40, 23], [30, 22], [20, 21], [10, 20],
                            [0, 20], [-10, 20], [-20, 20], [-30, 20], [-40, 20], [-50, 20],
                            [-60, 20]
                        ]]
                    }
                ]
            },
            200: {
                name: "Pangaea Supercontinent",
                desc: "All continents joined as one massive landmass",
                continents: [
                    {
                        name: "Pangaea",
                        color: "#8B4513",
                        coords: [[
                            [-30, 70], [-20, 68], [-10, 65], [0, 62], [10, 58], [20, 54],
                            [30, 50], [40, 45], [50, 40], [60, 35], [70, 30], [75, 25],
                            [80, 20], [82, 15], [84, 10], [85, 5], [86, 0], [85, -5],
                            [84, -10], [82, -15], [80, -20], [75, -25], [70, -30], [65, -35],
                            [60, -40], [55, -45], [50, -48], [45, -50], [40, -52], [35, -53],
                            [30, -54], [25, -55], [20, -54], [15, -53], [10, -52], [5, -50],
                            [0, -48], [-5, -45], [-10, -42], [-15, -38], [-20, -35], [-25, -30],
                            [-30, -25], [-35, -20], [-40, -15], [-42, -10], [-44, -5], [-45, 0],
                            [-44, 5], [-42, 10], [-40, 15], [-38, 20], [-35, 25], [-32, 30],
                            [-30, 35], [-28, 40], [-26, 45], [-25, 50], [-24, 55], [-25, 60],
                            [-27, 65], [-30, 70]
                        ]]
                    }
                ]
            },
            300: {
                name: "Carboniferous Period",
                desc: "Coal forests dominate, continents assembling",
                continents: [
                    {
                        name: "Gondwana",
                        color: "#654321",
                        coords: [[
                            [-20, 20], [-10, 15], [0, 10], [10, 5], [20, 0], [30, -5],
                            [40, -10], [50, -15], [60, -20], [70, -25], [80, -30], [90, -35],
                            [100, -40], [110, -45], [120, -50], [125, -55], [130, -60], [125, -65],
                            [120, -70], [110, -72], [100, -74], [90, -75], [80, -74], [70, -72],
                            [60, -70], [50, -65], [40, -60], [30, -55], [20, -50], [10, -45],
                            [0, -40], [-10, -35], [-20, -30], [-30, -25], [-40, -20], [-45, -15],
                            [-50, -10], [-52, -5], [-54, 0], [-52, 5], [-50, 10], [-45, 15],
                            [-40, 20], [-35, 22], [-30, 23], [-25, 22], [-20, 20]
                        ]]
                    },
                    {
                        name: "Euramerica",
                        color: "#8B6914",
                        coords: [[
                            [-80, 30], [-70, 28], [-60, 26], [-50, 24], [-40, 22], [-30, 20],
                            [-20, 18], [-10, 16], [0, 14], [10, 12], [20, 10], [30, 8],
                            [40, 6], [50, 4], [60, 2], [70, 0], [75, -2], [80, 0],
                            [82, 2], [84, 5], [85, 8], [84, 12], [82, 16], [80, 20],
                            [75, 24], [70, 28], [60, 32], [50, 35], [40, 38], [30, 40],
                            [20, 42], [10, 44], [0, 45], [-10, 44], [-20, 42], [-30, 40],
                            [-40, 38], [-50, 36], [-60, 34], [-70, 32], [-80, 30]
                        ]]
                    },
                    {
                        name: "Siberia",
                        color: "#4B5320",
                        coords: [[
                            [80, 60], [90, 58], [100, 56], [110, 54], [120, 52], [130, 50],
                            [140, 52], [145, 54], [150, 56], [145, 58], [140, 60], [130, 62],
                            [120, 64], [110, 66], [100, 68], [90, 70], [80, 68], [75, 66],
                            [70, 64], [75, 62], [80, 60]
                        ]]
                    }
                ]
            },
            450: {
                name: "Ordovician Period",
                desc: "First land plants appear, most land in southern hemisphere",
                continents: [
                    {
                        name: "Gondwana",
                        color: "#704214",
                        coords: [[
                            [0, -20], [10, -25], [20, -30], [30, -35], [40, -40], [50, -45],
                            [60, -50], [70, -55], [80, -60], [90, -65], [100, -70], [110, -75],
                            [120, -78], [130, -80], [140, -82], [150, -83], [160, -82], [170, -80],
                            [180, -78], [-170, -75], [-160, -72], [-150, -68], [-140, -65], [-130, -60],
                            [-120, -55], [-110, -50], [-100, -45], [-90, -40], [-80, -35], [-70, -30],
                            [-60, -25], [-50, -20], [-40, -15], [-30, -10], [-20, -5], [-10, 0],
                            [0, -5], [0, -10], [0, -15], [0, -20]
                        ]]
                    },
                    {
                        name: "Laurentia",
                        color: "#556B2F",
                        coords: [[
                            [-120, 0], [-110, -2], [-100, -4], [-90, -6], [-80, -8], [-70, -10],
                            [-60, -8], [-50, -6], [-40, -4], [-30, -2], [-20, 0], [-10, 2],
                            [0, 4], [10, 6], [20, 8], [30, 10], [35, 12], [40, 14],
                            [35, 16], [30, 18], [20, 20], [10, 22], [0, 24], [-10, 25],
                            [-20, 24], [-30, 22], [-40, 20], [-50, 18], [-60, 16], [-70, 14],
                            [-80, 12], [-90, 10], [-100, 8], [-110, 6], [-120, 4], [-125, 2],
                            [-120, 0]
                        ]]
                    },
                    {
                        name: "Baltica",
                        color: "#8FBC8F",
                        coords: [[
                            [20, -30], [30, -32], [40, -34], [50, -36], [60, -38], [70, -40],
                            [75, -42], [80, -44], [75, -46], [70, -48], [60, -50], [50, -48],
                            [40, -46], [30, -44], [20, -42], [15, -40], [10, -38], [15, -35],
                            [20, -30]
                        ]]
                    },
                    {
                        name: "Siberia",
                        color: "#4B5320",
                        coords: [[
                            [90, 20], [100, 18], [110, 16], [120, 14], [130, 12], [140, 10],
                            [145, 8], [150, 10], [145, 12], [140, 14], [130, 16], [120, 18],
                            [110, 20], [100, 22], [90, 24], [85, 22], [90, 20]
                        ]]
                    }
                ]
            },
            540: {
                name: "Cambrian Explosion",
                desc: "Complex life explodes in the oceans",
                continents: [
                    {
                        name: "Greater Gondwana",
                        color: "#8B4513",
                        coords: [[
                            [-30, -60], [-20, -65], [-10, -70], [0, -75], [10, -78], [20, -80],
                            [30, -82], [40, -83], [50, -84], [60, -85], [70, -84], [80, -83],
                            [90, -82], [100, -80], [110, -78], [120, -75], [130, -70], [140, -65],
                            [150, -60], [160, -55], [170, -50], [180, -45], [170, -40], [160, -35],
                            [150, -30], [140, -25], [130, -20], [120, -15], [110, -10], [100, -5],
                            [90, 0], [80, 5], [70, 10], [60, 15], [50, 20], [40, 15],
                            [30, 10], [20, 5], [10, 0], [0, -5], [-10, -10], [-20, -15],
                            [-30, -20], [-40, -25], [-50, -30], [-60, -35], [-70, -40], [-75, -45],
                            [-80, -50], [-75, -55], [-70, -60], [-60, -65], [-50, -63], [-40, -61],
                            [-30, -60]
                        ]]
                    },
                    {
                        name: "Proto-Laurentia",
                        color: "#228B22",
                        coords: [[
                            [-100, -20], [-90, -22], [-80, -24], [-70, -26], [-60, -28], [-50, -30],
                            [-45, -32], [-40, -30], [-35, -28], [-30, -26], [-35, -24], [-40, -22],
                            [-50, -20], [-60, -18], [-70, -16], [-80, -14], [-90, -12], [-100, -10],
                            [-105, -12], [-110, -14], [-105, -16], [-100, -18], [-100, -20]
                        ]]
                    },
                    {
                        name: "Proto-Baltica",
                        color: "#2E8B57",
                        coords: [[
                            [50, -50], [60, -52], [70, -54], [80, -56], [85, -58], [90, -60],
                            [85, -62], [80, -64], [70, -62], [60, -60], [50, -58], [45, -56],
                            [40, -54], [45, -52], [50, -50]
                        ]]
                    }
                ]
            },
            750: {
                name: "Snowball Earth",
                desc: "Earth completely frozen, Rodinia breaking apart",
                continents: [
                    {
                        name: "Rodinia East",
                        color: "#B0C4DE",
                        coords: [[
                            [-60, -10], [-50, -15], [-40, -20], [-30, -25], [-20, -30], [-10, -35],
                            [0, -40], [10, -45], [20, -50], [30, -52], [40, -54], [50, -55],
                            [60, -54], [70, -52], [80, -50], [90, -45], [100, -40], [110, -35],
                            [120, -30], [125, -25], [130, -20], [125, -15], [120, -10], [110, -5],
                            [100, 0], [90, 5], [80, 10], [70, 12], [60, 14], [50, 15],
                            [40, 14], [30, 12], [20, 10], [10, 5], [0, 0], [-10, -5],
                            [-20, -10], [-30, -12], [-40, -10], [-50, -8], [-60, -10]
                        ]]
                    },
                    {
                        name: "Rodinia West",
                        color: "#778899",
                        coords: [[
                            [-150, -30], [-140, -35], [-130, -40], [-120, -45], [-110, -50], [-100, -52],
                            [-90, -54], [-80, -55], [-70, -54], [-60, -52], [-50, -50], [-40, -45],
                            [-30, -40], [-25, -35], [-20, -30], [-25, -25], [-30, -20], [-40, -15],
                            [-50, -10], [-60, -5], [-70, 0], [-80, 5], [-90, 10], [-100, 12],
                            [-110, 14], [-120, 15], [-130, 14], [-140, 12], [-150, 10], [-155, 5],
                            [-160, 0], [-155, -5], [-150, -10], [-145, -15], [-150, -20], [-155, -25],
                            [-150, -30]
                        ]]
                    }
                ]
            }
        };

        // Initialize globe
        function initGlobe() {
            const container = document.getElementById('globeViz');
            
            globe = Globe()(container)
                .backgroundColor('#000000')
                .globeImageUrl('//unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
                .showAtmosphere(true)
                .atmosphereColor('#87CEEB')
                .atmosphereAltitude(0.15)
                .polygonsData([])
                .polygonCapColor(() => 'rgba(139, 69, 19, 0.6)')  // Semi-transparent brown
                .polygonSideColor(() => 'rgba(0, 0, 0, 0.1)')
                .polygonStrokeColor(() => '#ffffff')
                .polygonAltitude(0.01)
                .polygonLabel(feat => feat.properties ? feat.properties.name : '');
                
            // Center the view
            globe.pointOfView({ lat: 0, lng: 0, altitude: 2.5 });
            
            // Remove loading message if it exists
            const loadingElement = document.querySelector('.loading');
            if (loadingElement) {
                loadingElement.style.display = 'none';
            }
            
            // Set initial continents
            setTimeout(() => {
                updateContinents(0);
            }, 500);
        }
        
        // Convert continent data to GeoJSON
        function convertToGeoJSON(continents) {
            return continents.map(continent => ({
                type: 'Feature',
                properties: {
                    name: continent.name,
                    color: continent.color
                },
                geometry: {
                    type: 'Polygon',
                    coordinates: continent.coords
                }
            }));
        }
        
        // Interpolate between two time periods
        function interpolateContinents(time) {
            const times = Object.keys(continentConfigs).map(Number).sort((a,b) => a-b);
            
            // Find the two time periods to interpolate between
            let t1 = 0, t2 = 0;
            for (let i = 0; i < times.length - 1; i++) {
                if (time >= times[i] && time <= times[i + 1]) {
                    t1 = times[i];
                    t2 = times[i + 1];
                    break;
                }
            }
            
            // If exact match or outside range, return exact config
            if (t1 === t2 || time <= times[0]) return continentConfigs[times[0]];
            if (time >= times[times.length - 1]) return continentConfigs[times[times.length - 1]];
            
            // Calculate interpolation factor
            const factor = (time - t1) / (t2 - t1);
            
            // For now, just return the nearest config
            // (True interpolation would require matching continents and morphing shapes)
            return factor < 0.5 ? continentConfigs[t1] : continentConfigs[t2];
        }
        
        // Update continents based on time
        function updateContinents(time) {
            if (!globe) return;
            
            const config = interpolateContinents(time);
            
            // Update display
            document.getElementById('timeValue').textContent = config.name;
            document.getElementById('myaValue').textContent = time + ' MYA';
            document.getElementById('periodName').textContent = config.name;
            document.getElementById('periodDesc').textContent = config.desc;
            
            // Convert to GeoJSON and update globe
            const geoData = convertToGeoJSON(config.continents);
            globe.polygonsData(geoData);
            
            // Update atmosphere color based on time
            if (time > 600) {
                globe.atmosphereColor('#FFFFFF'); // White - Snowball Earth
            } else if (time > 400) {
                globe.atmosphereColor('#FFA500'); // Orange - Different atmosphere
            } else if (time > 200) {
                globe.atmosphereColor('#FFB347'); // Peach - Warmer periods
            } else {
                globe.atmosphereColor('#87CEEB'); // Light sky blue - Modern
            }
        }
        
        // Time slider handler
        document.getElementById('timeSlider').addEventListener('input', (e) => {
            currentTime = parseInt(e.target.value);
            updateContinents(currentTime);
        });
        
        // Quick jump function
        function jumpToTime(time, name) {
            currentTime = time;
            document.getElementById('timeSlider').value = time;
            updateContinents(time);
            
            // Update button states
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }
        
        // Make function globally accessible
        window.jumpToTime = jumpToTime;
        
        // Animation functions
        function playAnimation() {
            if (animationInterval) return;
            
            animationInterval = setInterval(() => {
                currentTime += 10;
                if (currentTime > 750) currentTime = 0;
                
                document.getElementById('timeSlider').value = currentTime;
                updateContinents(currentTime);
            }, 100);
        }
        
        function stopAnimation() {
            if (animationInterval) {
                clearInterval(animationInterval);
                animationInterval = null;
            }
        }
        
        // Make functions globally accessible
        window.playAnimation = playAnimation;
        window.stopAnimation = stopAnimation;
        
        // Initialize when page loads
        window.addEventListener('load', () => {
            initGlobe();
        });
        
        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            stopAnimation();
        });
    </script>
</body>
</html>