<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Calendar - Deep Time Whispers</title>
    <meta name="description" content="Experience Earth's 4.5 billion year history compressed into a single year. Discover when major events happened in the cosmic calendar of deep time.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="css/main.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/images/DeepTimeWhispers-Final.png">
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-053192S64K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        
        gtag('config', 'G-053192S64K', {
            page_title: 'Cosmic Calendar',
            page_location: window.location.href
        });
        
        // Track cosmic calendar interactions
        function trackCosmicEvent(eventType, details = {}) {
            gtag('event', 'cosmic_calendar_interaction', {
                event_category: 'Cosmic Calendar',
                event_label: eventType,
                custom_parameter_1: 'cosmic_calendar_page',
                ...details
            });
        }
        
        // Track date navigation
        function trackDateNavigation(date, eventName) {
            trackCosmicEvent('date_navigation', {
                cosmic_date: date,
                event_name: eventName
            });
        }
        
        // Track event clicks
        function trackEventClick(eventName, cosmicDate, mya) {
            trackCosmicEvent('event_click', {
                event_name: eventName,
                cosmic_date: cosmicDate,
                million_years_ago: mya
            });
        }
        
        // Track time scale comparisons
        function trackTimeComparison(comparisonType) {
            trackCosmicEvent('time_comparison', {
                comparison_type: comparisonType
            });
        }
    </script>
    
    <style>
        :root {
            --primary-purple: #7B1FA2;
            --deep-purple: #4A148C;
            --cosmic-teal: #4DB6AC;
            --midnight: #1A237E;
            --stardust: #E1BEE7;
            --nebula: #7E57C2;
            --space-black: #0A0E27;
            --soft-white: #F5F5F5;
            --text-light: #B39DDB;
        }

        body {
            font-family: 'Raleway', sans-serif;
            background: var(--space-black);
            color: var(--soft-white);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        /* Cosmic Background Animation */
        .cosmic-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
            overflow: hidden;
        }

        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            width: 1px;
            height: 1px;
            background: transparent;
            box-shadow: 779px 1331px #fff, 324px 42px #fff, 303px 586px #fff, 1312px 276px #fff, 451px 625px #fff,
                        1433px 1732px #fff, 701px 1821px #fff, 1458px 1963px #fff, 357px 1673px #fff, 1238px 1146px #fff;
            animation: drift 120s linear infinite;
        }

        @keyframes drift {
            from { transform: translateY(0px); }
            to { transform: translateY(-1000px); }
        }

        /* Main container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Header section */
        .calendar-header {
            text-align: center;
            padding: 3rem 0 2rem;
            margin-top: 120px;
        }

        .calendar-header h1 {
            font-family: 'Crimson Text', serif;
            font-size: 3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--stardust), var(--cosmic-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .calendar-header .subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 2rem;
            font-weight: 300;
        }

        .calendar-description {
            max-width: 800px;
            margin: 0 auto 3rem;
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--soft-white);
            text-align: center;
        }

        /* Today indicator */
        .cosmic-today {
            background: rgba(78, 182, 172, 0.1);
            border: 2px solid var(--cosmic-teal);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 2rem auto;
            max-width: 600px;
            text-align: center;
        }

        .cosmic-today h3 {
            color: var(--cosmic-teal);
            margin-bottom: 0.5rem;
            font-family: 'Crimson Text', serif;
            font-size: 1.5rem;
        }

        .cosmic-today .date {
            font-size: 2rem;
            font-weight: 600;
            color: var(--stardust);
            margin-bottom: 0.5rem;
        }

        .cosmic-today .description {
            color: var(--text-light);
            font-size: 1rem;
        }

        /* Calendar year grid */
        .calendar-year {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin: 3rem 0;
            position: relative;
        }

        .month-container {
            background: rgba(26, 35, 126, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1rem;
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 1;
            overflow: visible;
        }

        .month-header {
            text-align: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .month-name {
            font-family: 'Crimson Text', serif;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--stardust);
            margin-bottom: 0.3rem;
        }

        .month-years {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* Days grid */
        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            position: relative;
            overflow: visible;
        }

        .day-cell {
            aspect-ratio: 1;
            position: relative;
            cursor: pointer;
            border-radius: 3px;
            transition: all 0.2s ease;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Geological period colors */
        .hadean {
            background: linear-gradient(135deg, #8B0000, #4B0000);
        }

        .archean {
            background: linear-gradient(135deg, #8B4513, #654321);
        }

        .proterozoic {
            background: linear-gradient(135deg, #4682B4, #191970);
        }

        .paleozoic {
            background: linear-gradient(135deg, #228B22, #006400);
        }

        .mesozoic {
            background: linear-gradient(135deg, #FFD700, #FFA500);
        }

        .cenozoic {
            background: linear-gradient(135deg, #9370DB, #4B0082);
        }

        .quaternary {
            background: linear-gradient(135deg, #4DB6AC, #00695C);
        }

        .day-cell:hover,
        .day-cell.touch-active {
            transform: scale(1.2);
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
        }

        .day-cell.has-event {
            border: 1px solid rgba(255, 255, 255, 0.5);
            font-weight: 600;
        }

        .day-cell.major-event {
            border: 2px solid #FFD700;
            box-shadow: inset 0 0 10px rgba(255, 215, 0, 0.3);
        }

        /* Day tooltip */
        .day-tooltip {
            position: absolute;
            bottom: 120%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 14, 39, 0.98);
            border: 1px solid var(--cosmic-teal);
            border-radius: 8px;
            padding: 0.8rem;
            width: 200px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 9999;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.8);
        }

        .day-cell:hover,
        .day-cell.touch-active {
            z-index: 9998 !important;
        }

        .day-cell:hover .day-tooltip,
        .day-cell.touch-active .day-tooltip {
            opacity: 1;
        }

        /* Adjust tooltip position for rightmost days */
        .day-cell:nth-child(7n) .day-tooltip,
        .day-cell:nth-child(7n-1) .day-tooltip {
            left: auto;
            right: 0;
            transform: translateX(0);
        }

        /* Adjust tooltip position for leftmost days */
        .day-cell:nth-child(7n+1) .day-tooltip,
        .day-cell:nth-child(7n+2) .day-tooltip {
            left: 0;
            transform: translateX(0);
        }

        .tooltip-date {
            font-weight: 600;
            color: var(--cosmic-teal);
            margin-bottom: 0.3rem;
        }

        .tooltip-time {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 0.5rem;
        }

        .tooltip-event {
            font-size: 0.9rem;
            color: var(--soft-white);
            margin-bottom: 0.2rem;
        }

        .tooltip-description {
            font-size: 0.8rem;
            color: var(--text-light);
            line-height: 1.3;
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .legend-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            body {
                padding-top: 70px;
            }
            
            .container {
                padding: 0 !important;
                max-width: 100vw !important;
                margin: 0 !important;
            }

            .calendar-header {
                padding: 1.5rem 1rem;
                margin-bottom: 0;
            }

            .calendar-header h1 {
                font-size: 2.5rem !important;
                margin-bottom: 1rem !important;
                line-height: 1.1 !important;
            }

            .calendar-header .subtitle {
                font-size: 1.2rem !important;
                margin-bottom: 1rem !important;
                line-height: 1.3 !important;
            }

            .calendar-description {
                font-size: 1.1rem;
                line-height: 1.5;
                margin-bottom: 2rem;
                padding: 0 1rem;
            }

            .calendar-year {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                margin: 2rem 1rem;
            }

            .month-container {
                padding: 1.5rem;
                margin-bottom: 1.5rem;
                border-radius: 12px;
            }
            
            .month-header {
                margin-bottom: 1.2rem;
            }
            
            .month-name {
                font-size: 1.6rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            .month-years {
                font-size: 1rem !important;
                line-height: 1.4 !important;
            }

            .days-grid {
                gap: 2px !important;
            }

            .day-cell {
                font-size: 1rem !important;
                min-height: 44px !important;
                font-weight: 600 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .day-tooltip {
                font-size: 1rem;
                padding: 1rem;
                min-width: 260px;
                max-width: 320px;
            }
            
            .tooltip-date {
                font-size: 1.2rem;
                margin-bottom: 0.6rem;
                font-weight: 600;
            }
            
            .tooltip-event {
                font-size: 1rem;
                line-height: 1.5;
            }

            .cosmic-today {
                margin: 2rem 1rem;
                padding: 2rem;
            }
            
            .cosmic-today h3 {
                font-size: 1.6rem;
                margin-bottom: 1rem;
            }
            
            .cosmic-today .date {
                font-size: 2.5rem;
                margin-bottom: 1rem;
            }
            
            .cosmic-today .description {
                font-size: 1.2rem;
                line-height: 1.6;
            }
            
            .legend {
                gap: 1.5rem;
                margin: 2rem 1rem;
                padding: 1rem;
            }
            
            .legend-item {
                font-size: 1.1rem;
                line-height: 1.5;
            }
            
            /* Timeline section - the key fix */
            .timeline-header {
                padding: 2rem 1rem 1rem !important;
                text-align: center !important;
            }
            
            .timeline-header h2 {
                font-size: 2.2rem !important;
                margin-bottom: 1rem !important;
                line-height: 1.2 !important;
            }
            
            .timeline-subtitle {
                font-size: 1.1rem !important;
                line-height: 1.4 !important;
                margin-bottom: 2rem !important;
            }
            
            .microseconds-timeline-container {
                padding: 1rem !important;
                margin: 0 1rem 2rem !important;
                min-height: 70vh !important;
                overflow-x: visible !important;
                overflow-y: auto !important;
                max-width: calc(100vw - 2rem) !important;
            }
            
            .event-label {
                font-size: 18px !important;
                font-weight: 600;
            }
            
            .event-time {
                font-size: 15px !important;
                opacity: 0.9;
            }

            .cosmic-today .date {
                font-size: 1.5rem;
            }

            .legend {
                gap: 0.5rem;
                padding: 1rem;
            }

            .legend-item {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .calendar-header {
                padding: 1rem 0.5rem;
            }
            
            .calendar-header h1 {
                font-size: 2rem;
            }
            
            .calendar-header .subtitle {
                font-size: 1rem;
            }
            
            .calendar-description {
                font-size: 1rem;
                padding: 0 0.5rem;
                margin-bottom: 1.5rem;
            }
            
            .calendar-year {
                margin: 1.5rem 0.5rem;
                gap: 1rem;
            }
            
            .month-container {
                padding: 1rem;
                margin-bottom: 1rem;
            }
            
            .month-name {
                font-size: 1.3rem;
            }
            
            .month-years {
                font-size: 0.9rem;
            }
            
            .day-cell {
                font-size: 0.9rem;
                min-height: 40px;
            }
            
            .day-tooltip {
                min-width: 240px;
                font-size: 0.9rem;
                padding: 0.8rem;
            }
            
            .cosmic-today {
                padding: 1.5rem;
                margin: 1.5rem 0.5rem;
            }
            
            .cosmic-today h3 {
                font-size: 1.3rem;
            }
            
            .cosmic-today .date {
                font-size: 2rem;
            }
            
            .cosmic-today .description {
                font-size: 1rem;
            }
            
            .legend {
                margin: 1.5rem 0.5rem;
                gap: 1rem;
            }
            
            .legend-item {
                font-size: 1rem;
            }
            
            .timeline-header {
                padding: 1.5rem 0.5rem 1rem;
            }
            
            .timeline-header h2 {
                font-size: 1.8rem;
            }
            
            .timeline-subtitle {
                font-size: 1rem;
            }
            
            .microseconds-timeline-container {
                margin: 0 0.5rem 1.5rem;
                padding: 0.8rem;
                min-height: 60vh;
            }
            
            .microseconds-timeline-svg {
                min-height: 70vh;
            }
            
            .event-label {
                font-size: 16px !important;
            }
            
            .event-time {
                font-size: 13px !important;
            }
        }

        /* Special highlighting for significant events */
        .major-event {
            border-left-color: #FFD700 !important;
            background: rgba(255, 215, 0, 0.1) !important;
        }

        .major-event .event-date {
            color: #FFD700;
        }

        .life-event {
            border-left-color: #4CAF50 !important;
            background: rgba(76, 175, 80, 0.1) !important;
        }

        .life-event .event-date {
            color: #4CAF50;
        }

        .extinction-event {
            border-left-color: #F44336 !important;
            background: rgba(244, 67, 54, 0.1) !important;
        }

        .extinction-event .event-date {
            color: #F44336;
        }
    </style>
</head>
<body>
    <!-- Cosmic Background Animation -->
    <div class="cosmic-bg">
        <div class="stars"></div>
    </div>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <a href="index.html" class="logo-text">
                        <span class="logo-full">Deep Time Whispers</span>
                        <span class="logo-short">DTW</span>
                    </a>
                </div>
                <div class="nav-links">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="timeline.html" class="nav-link">Timeline</a>
                    <a href="ancient-earth-viewer.html" class="nav-link">Ancient Earth</a>
                    <a href="cosmic-calendar.html" class="nav-link active">Cosmic Calendar</a>
                    <a href="episodes.html" class="nav-link">Episodes</a>
                    <a href="ask-chrononaut.html" class="nav-link">Ask Chrononaut</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Header -->
            <section class="calendar-header">
                <h1>The Cosmic Calendar</h1>
                <p class="subtitle">Earth's 4.5 Billion Year Story in One Year</p>
                <div class="calendar-description">
                    <p>Imagine all of Earth's history compressed into a single year. The planet forms on January 1st, and every second represents about 143 years of real time. Life doesn't appear until spring, complex cells wait until fall, and all of recorded human history happens in the final seconds of December 31st.</p>
                </div>
            </section>

            <!-- Today's Cosmic Date -->
            <section class="cosmic-today">
                <h3>If Earth's history was one year...</h3>
                <div class="date">Right now is December 31st, 11:59:59.9 PM</div>
                <p class="description">Agriculture began 2 seconds ago, civilization 1 second ago</p>
            </section>

            <!-- Geological Period Legend -->
            <section class="legend">
                <div class="legend-item">
                    <div class="legend-color hadean"></div>
                    <span class="legend-label">Hadean (4.5-4.0 BYA)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color archean"></div>
                    <span class="legend-label">Archean (4.0-2.5 BYA)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color proterozoic"></div>
                    <span class="legend-label">Proterozoic (2.5-0.54 BYA)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color paleozoic"></div>
                    <span class="legend-label">Paleozoic (541-252 MYA)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color mesozoic"></div>
                    <span class="legend-label">Mesozoic (252-66 MYA)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color cenozoic"></div>
                    <span class="legend-label">Cenozoic (66-2.6 MYA)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color quaternary"></div>
                    <span class="legend-label">Quaternary (2.6 MYA-Present)</span>
                </div>
            </section>

            <!-- Calendar Year Grid -->
            <section class="calendar-year" id="calendarYear">
                <!-- 12 months with day grids will be dynamically generated here -->
            </section>
        </div>
    </main>

    <!-- Cosmic Microseconds Timeline Section -->
    <section class="cosmic-microseconds-section">
        <div class="container">
            <div class="timeline-header">
                <h2>The Final Cosmic Microseconds</h2>
                <p class="timeline-subtitle">The last 0.7 seconds of Earth's cosmic year - from when humans left Africa to today</p>
            </div>
            
            <!-- Vertical Timeline Container -->
            <div class="microseconds-timeline-container">
                <svg id="microsecondsTimelineSvg" class="microseconds-timeline-svg">
                    <!-- Timeline will be dynamically generated here -->
                </svg>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>Deep Time Whispers</h3>
                    <p>Ancient Memories for Modern Dreams</p>
                </div>
                <div class="footer-links">
                    <h4>Explore</h4>
                    <a href="timeline.html">Timeline</a>
                    <a href="ancient-earth-viewer.html">Ancient Earth</a>
                    <a href="cosmic-calendar.html">Cosmic Calendar</a>
                    <a href="index.html">Back to Main Site</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2024 Deep Time Whispers. You are made of ancient atoms.</p>
            </div>
        </div>
    </footer>

    <script>
        // Constants
        const EARTH_AGE = 4500000000; // 4.5 billion years
        const YEAR_IN_MS = 365 * 24 * 60 * 60 * 1000;
        const MYA_PER_DAY = EARTH_AGE / 365 / 1000000; // Million years per cosmic day

        // Month data
        const monthNames = ["January", "February", "March", "April", "May", "June", 
                           "July", "August", "September", "October", "November", "December"];
        const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

        // Major events with specific dates
        const cosmicEvents = [
            // January - Formation events
            { day: 1, title: "Earth Forms", mya: 4500, description: "Solar system and Earth form from cosmic dust" },
            { day: 3, title: "First Atmosphere", mya: 4480, description: "Hydrogen and helium atmosphere forms" },
            { day: 7, title: "Heavy Bombardment", mya: 4450, description: "Intense asteroid and comet impacts begin" },
            { day: 15, title: "Moon Forms", mya: 4400, description: "Giant impact creates the Moon" },
            { day: 22, title: "Magma Ocean", mya: 4350, description: "Earth's surface is molten rock" },
            
            // February - Hadean Eon
            { day: 35, title: "First Oceans", mya: 4200, description: "Water vapor condenses into first oceans" },
            { day: 42, title: "Late Heavy Bombardment", mya: 4100, description: "Intense period of impacts" },
            { day: 56, title: "Oldest Rocks", mya: 4000, description: "Earliest surviving rocks on Earth" },
            
            // March - Early Life
            { day: 70, title: "First Organic Molecules", mya: 3900, description: "Complex carbon compounds form" },
            { day: 84, title: "First Life", mya: 3800, description: "Earliest evidence of life - simple bacteria" },
            { day: 91, title: "Stromatolites", mya: 3700, description: "Layered bacterial mats in shallow seas" },
            
            // April-May - Archean Life
            { day: 105, title: "Photosynthesis Begins", mya: 3600, description: "Non-oxygen producing photosynthesis" },
            { day: 135, title: "Cyanobacteria", mya: 3500, description: "Oxygen-producing photosynthesis begins" },
            { day: 150, title: "First Supercontinent", mya: 3000, description: "Ur forms - first large landmass" },
            
            // June-August - Proterozoic
            { day: 180, title: "Banded Iron Formations", mya: 2500, description: "Oxygen reacts with iron in oceans" },
            { day: 257, title: "Great Oxidation Event", mya: 2400, description: "Free oxygen accumulates, mass extinction" },
            { day: 270, title: "First Glaciation", mya: 2200, description: "Huronian glaciation begins" },
            { day: 290, title: "Atmosphere Stabilizes", mya: 2000, description: "Modern atmosphere composition forms" },
            { day: 302, title: "Complex Cells", mya: 1800, description: "Eukaryotic cells with nuclei appear" },
            
            // September-October - Evolution accelerates
            { day: 313, title: "Sexual Reproduction", mya: 1200, description: "Sexual reproduction evolves" },
            { day: 320, title: "Multicellular Life", mya: 1000, description: "First multicellular organisms" },
            { day: 325, title: "Rodinia Forms", mya: 900, description: "Supercontinent Rodinia assembles" },
            { day: 329, title: "Snowball Earth", mya: 750, description: "Entire planet freezes over" },
            { day: 332, title: "Ediacaran Life", mya: 600, description: "First complex soft-bodied animals" },
            
            // November - Complex Life
            { day: 338, title: "First Shells", mya: 550, description: "Animals develop hard shells" },
            { day: 351, title: "Cambrian Explosion", mya: 540, description: "Most animal body plans appear" },
            { day: 352, title: "First Eyes", mya: 520, description: "Complex eyes evolve" },
            { day: 353, title: "First Fish", mya: 500, description: "Vertebrates appear in the oceans" },
            { day: 354, title: "Ordovician Radiation", mya: 480, description: "Marine life diversifies dramatically" },
            { day: 355, title: "Life on Land", mya: 450, description: "Plants and arthropods colonize land" },
            
            // December - Recent Earth
            { day: 356, title: "First Trees", mya: 385, description: "Forests spread across continents" },
            { day: 357, title: "First Amphibians", mya: 365, description: "Vertebrates move onto land" },
            { day: 358, title: "Great Dying", mya: 252, description: "Largest mass extinction - 90% of species die" },
            { day: 359, title: "First Dinosaurs", mya: 230, description: "Dinosaurs appear in the Triassic" },
            { day: 359.5, title: "First Mammals", mya: 200, description: "Small mammals evolve alongside dinosaurs" },
            { day: 360, title: "First Flowers", mya: 130, description: "Flowering plants evolve" },
            { day: 360.5, title: "Dinosaur Extinction", mya: 66, description: "Asteroid impact kills the dinosaurs" },
            
            // December 31st - The Human Day
            { day: 364, title: "First Primates", mya: 55, description: "Early primates evolve" },
            { day: 365, title: "Great Apes", mya: 20, description: "Apes diverge from monkeys" },
            { day: 365.2, title: "First Hominids", mya: 7, description: "Human ancestors walk upright" },
            { day: 365.7, title: "Homo sapiens", mya: 0.3, description: "Modern humans appear in Africa" },
            { day: 365.9, title: "Ice Ages", mya: 0.1, description: "Glacial cycles shape human evolution" },
            { day: 365.97, title: "Agriculture", mya: 0.01, description: "Humans begin farming" },
            { day: 365.99, title: "Civilization", mya: 0.005, description: "First cities and writing" },
            { day: 365.999, title: "Industrial Revolution", mya: 0.0002, description: "Machines transform society" },
            { day: 365.9999, title: "Space Age", mya: 0.00006, description: "Humans reach space" }
        ];

        // Calculate geological period for a given day
        function getGeologicalPeriod(dayOfYear) {
            const mya = (365 - dayOfYear + 1) * MYA_PER_DAY;
            
            if (mya > 4000) return 'hadean';
            if (mya > 2500) return 'archean';
            if (mya > 541) return 'proterozoic';
            if (mya > 252) return 'paleozoic';
            if (mya > 66) return 'mesozoic';
            if (mya > 2.6) return 'cenozoic';
            return 'quaternary';
        }

        // Get event for a specific day
        function getEventForDay(dayOfYear) {
            return cosmicEvents.find(event => event.day === dayOfYear);
        }

        // Format time in MYA/BYA
        function formatTime(mya) {
            if (mya >= 1000) {
                return `${(mya / 1000).toFixed(1)} BYA`;
            } else if (mya >= 1) {
                return `${mya.toFixed(0)} MYA`;
            } else {
                return `${(mya * 1000).toFixed(0)} KYA`;
            }
        }

        // Generate the full calendar
        function generateCalendar() {
            const calendarYear = document.getElementById('calendarYear');
            let dayOfYear = 1;

            for (let month = 0; month < 12; month++) {
                const monthContainer = document.createElement('div');
                monthContainer.className = 'month-container';
                
                // Month header
                const monthHeader = document.createElement('div');
                monthHeader.className = 'month-header';
                
                const startMya = (365 - dayOfYear + 1) * MYA_PER_DAY;
                const endMya = (365 - (dayOfYear + daysInMonth[month] - 1) + 1) * MYA_PER_DAY;
                
                monthHeader.innerHTML = `
                    <div class="month-name">${monthNames[month]}</div>
                    <div class="month-years">${formatTime(startMya)} - ${formatTime(endMya)}</div>
                `;
                
                // Days grid
                const daysGrid = document.createElement('div');
                daysGrid.className = 'days-grid';
                
                // Add empty cells for alignment (start with Sunday)
                // Calculate cosmic calendar day of week (January 1st = Sunday)
                let cosmicDayOfYear = 1;
                for (let m = 0; m < month; m++) {
                    cosmicDayOfYear += daysInMonth[m];
                }
                const firstDay = (cosmicDayOfYear - 1) % 7; // 0 = Sunday
                for (let i = 0; i < firstDay; i++) {
                    const emptyCell = document.createElement('div');
                    emptyCell.className = 'day-cell';
                    emptyCell.style.opacity = '0';
                    daysGrid.appendChild(emptyCell);
                }
                
                // Add days
                for (let day = 1; day <= daysInMonth[month]; day++) {
                    const dayCell = document.createElement('div');
                    dayCell.className = 'day-cell';
                    
                    // Add geological period color
                    const period = getGeologicalPeriod(dayOfYear);
                    dayCell.classList.add(period);
                    
                    // Check for events
                    const event = getEventForDay(dayOfYear);
                    if (event) {
                        dayCell.classList.add('has-event', 'major-event');
                    }
                    
                    // Day number
                    dayCell.textContent = day;
                    
                    // Calculate time for this day
                    const mya = (365 - dayOfYear + 1) * MYA_PER_DAY;
                    
                    // Create tooltip
                    const tooltip = document.createElement('div');
                    tooltip.className = 'day-tooltip';
                    
                    let tooltipContent = `
                        <div class="tooltip-date">${monthNames[month]} ${day}</div>
                        <div class="tooltip-time">${formatTime(mya)}</div>
                    `;
                    
                    if (event) {
                        tooltipContent += `
                            <div class="tooltip-event">${event.title}</div>
                            <div class="tooltip-description">${event.description}</div>
                        `;
                    }
                    
                    // Add period info
                    const periodNames = {
                        hadean: 'Hadean Eon',
                        archean: 'Archean Eon',
                        proterozoic: 'Proterozoic Eon',
                        paleozoic: 'Paleozoic Era',
                        mesozoic: 'Mesozoic Era',
                        cenozoic: 'Cenozoic Era',
                        quaternary: 'Quaternary Period'
                    };
                    
                    tooltipContent += `<div class="tooltip-description" style="margin-top: 0.5rem; font-style: italic;">${periodNames[period]}</div>`;
                    
                    tooltip.innerHTML = tooltipContent;
                    dayCell.appendChild(tooltip);
                    
                    daysGrid.appendChild(dayCell);
                    dayOfYear++;
                }
                
                monthContainer.appendChild(monthHeader);
                monthContainer.appendChild(daysGrid);
                calendarYear.appendChild(monthContainer);
            }
        }

        // Initialize calendar on page load
        document.addEventListener('DOMContentLoaded', () => {
            generateCalendar();
            
            // Add touch support for mobile
            addMobileTouchSupport();
        });
        
        // Add touch event handlers for mobile
        function addMobileTouchSupport() {
            // Detect if device is touch-enabled
            const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            
            if (isTouchDevice) {
                let activeTooltip = null;
                
                // Add touch handlers to all day cells
                document.querySelectorAll('.day-cell').forEach(cell => {
                    cell.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        
                        // Hide any previously active tooltip
                        if (activeTooltip && activeTooltip !== this) {
                            activeTooltip.classList.remove('touch-active');
                            const prevTooltip = activeTooltip.querySelector('.day-tooltip');
                            if (prevTooltip) prevTooltip.style.opacity = '0';
                        }
                        
                        // Show this cell's tooltip
                        this.classList.add('touch-active');
                        const tooltip = this.querySelector('.day-tooltip');
                        if (tooltip) {
                            tooltip.style.opacity = '1';
                            activeTooltip = this;
                        }
                    });
                });
                
                // Hide tooltip when touching elsewhere
                document.addEventListener('touchstart', function(e) {
                    if (!e.target.closest('.day-cell') && activeTooltip) {
                        activeTooltip.classList.remove('touch-active');
                        const tooltip = activeTooltip.querySelector('.day-tooltip');
                        if (tooltip) tooltip.style.opacity = '0';
                        activeTooltip = null;
                    }
                });
            }
        }
    </script>
    
    <style>
        /* Cosmic Microseconds Timeline Styles */
        .cosmic-microseconds-section {
            margin-top: 4rem;
            padding: 3rem 0;
            background: linear-gradient(180deg, rgba(26, 35, 126, 0.1) 0%, rgba(10, 14, 39, 0.3) 100%);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 10;
        }
        
        .timeline-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .timeline-header h2 {
            font-family: 'Crimson Text', serif;
            font-size: 2.5rem;
            background: linear-gradient(45deg, var(--stardust), var(--cosmic-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }
        
        .timeline-subtitle {
            font-size: 1.1rem;
            color: var(--text-light);
        }
        
        /* Timeline Container */
        .microseconds-timeline-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            overflow-x: auto;
        }
        
        .microseconds-timeline-svg {
            width: 100%;
            min-height: 2500px;
            display: block;
            background: transparent;
        }
        
        @media (max-width: 768px) {
            .microseconds-timeline-svg {
                min-height: 1500px !important;
            }
        }
        
        @media (max-width: 480px) {
            .microseconds-timeline-svg {
                min-height: 1200px !important;
            }
        }
        
        /* SVG Timeline Styles */
        .timeline-line {
            stroke: var(--cosmic-teal);
            stroke-width: 3;
            opacity: 0.5;
        }
        
        .event-group {
            cursor: pointer;
        }
        
        .event-circle {
            /* Removed annoying hover animation that covers text */
        }
        
        .event-label {
            font-family: 'Raleway', sans-serif;
            font-size: 14px;
            fill: var(--text-light);
        }
        
        .event-title {
            font-weight: 600;
            fill: var(--soft-white);
            font-size: 16px;
        }
        
        .event-time {
            font-size: 14px;
            fill: var(--cosmic-teal);
        }
        
        .event-seconds {
            font-size: 11px;
            fill: var(--text-light);
        }
        
        /* Event type colors */
        .ice-age-event { fill: #87CEEB; stroke: #4682B4; }
        .geological-event { fill: #8B4513; stroke: #654321; }
        .prehistoric-event { fill: #FF6347; stroke: #DC143C; }
        .ancient-event { fill: #FFD700; stroke: #FFA500; }
        .medieval-event { fill: #9370DB; stroke: #4B0082; }
        .modern-event { fill: #32CD32; stroke: #228B22; }
        .future-event { fill: #FF1493; stroke: #DC143C; }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .timeline-header h2 {
                font-size: 2rem;
            }
            
            .microseconds-timeline-container {
                padding: 1rem;
            }
            
            .event-label {
                font-size: 12px;
            }
            
            .event-time {
                font-size: 10px;
            }
        }
    </style>
    
    <script>
        // Timeline events from cosmic microseconds
        const microsecondsEvents = [
            // Start: Humans Leave Africa
            { time: 100000, seconds: 0.7, pos: 0, title: "Humans Leave Africa", desc: "First major migrations out of Africa", type: "prehistoric" },
            { time: 90000, seconds: 0.63, pos: 10, title: "Humans Reach Middle East", desc: "Early settlements in Levant", type: "prehistoric" },
            { time: 70000, seconds: 0.49, pos: 30, title: "Toba Eruption", desc: "Supervolcano nearly drives humans extinct", type: "geological" },
            { time: 65000, seconds: 0.455, pos: 35, title: "Humans Reach Australia", desc: "First sea crossings, island-hopping", type: "prehistoric" },
            { time: 50000, seconds: 0.35, pos: 50, title: "Neanderthals Peak", desc: "Neanderthals at their height in Europe", type: "prehistoric" },
            { time: 45000, seconds: 0.315, pos: 55, title: "Humans Reach Europe", desc: "Cave paintings and complex tools", type: "prehistoric" },
            { time: 40000, seconds: 0.28, pos: 60, title: "Neanderthals Extinct", desc: "Last Neanderthals disappear", type: "prehistoric" },
            { time: 30000, seconds: 0.21, pos: 70, title: "Denisovans Extinct", desc: "Denisovan humans go extinct", type: "prehistoric" },
            { time: 25000, seconds: 0.175, pos: 75, title: "Last Glacial Maximum", desc: "Ice age reaches its peak", type: "ice-age" },
            { time: 18000, seconds: 0.126, pos: 82, title: "Homo floresiensis Extinct", desc: "Last 'hobbits' of Indonesia disappear", type: "prehistoric" },
            { time: 15000, seconds: 0.105, pos: 85, title: "Humans Reach Americas", desc: "First peoples cross to the Americas", type: "prehistoric" },
            { time: 13000, seconds: 0.091, pos: 87, title: "Lake Agassiz Dam Breaks", desc: "Massive glacial lake drains, changes climate", type: "geological" },
            { time: 11700, seconds: 0.082, pos: 88.3, title: "Last Ice Age Ends", desc: "Holocene epoch begins, stable climate", type: "ice-age" },
            { time: 11500, seconds: 0.081, pos: 88.5, title: "Göbekli Tepe Built", desc: "World's oldest known temple complex", type: "ancient" },
            { time: 10000, seconds: 0.07, pos: 90, title: "Agriculture Begins", desc: "Farming revolution in Fertile Crescent", type: "ancient" },
            { time: 8000, seconds: 0.056, pos: 92, title: "Cities Founded", desc: "First permanent settlements", type: "ancient" },
            { time: 5000, seconds: 0.035, pos: 95, title: "Writing Invented", desc: "Cuneiform and hieroglyphs appear", type: "ancient" },
            { time: 4600, seconds: 0.032, pos: 95.4, title: "Great Pyramid Built", desc: "Pyramid of Giza constructed", type: "ancient" },
            { time: 3000, seconds: 0.021, pos: 97, title: "Bronze Age", desc: "Metal working spreads", type: "ancient" },
            { time: 2400, seconds: 0.017, pos: 97.6, title: "Alexander the Great", desc: "Conquers known world", type: "ancient" },
            { time: 2000, seconds: 0.014, pos: 98, title: "Jesus of Nazareth", desc: "Birth of Christianity", type: "ancient" },
            { time: 1500, seconds: 0.011, pos: 98.5, title: "Fall of Rome", desc: "Western Roman Empire collapses", type: "medieval" },
            { time: 1000, seconds: 0.007, pos: 99, title: "Medieval Period", desc: "European dark ages", type: "medieval" },
            { time: 500, seconds: 0.0035, pos: 99.5, title: "Renaissance", desc: "Cultural and scientific revival", type: "modern" },
            { time: 250, seconds: 0.00175, pos: 99.75, title: "Industrial Revolution", desc: "Steam power transforms society", type: "modern" },
            { time: 100, seconds: 0.0007, pos: 99.9, title: "World Wars", desc: "Two global conflicts", type: "modern" },
            { time: 60, seconds: 0.00042, pos: 99.94, title: "Space Age", desc: "Humans reach space", type: "modern" },
            { time: 30, seconds: 0.00021, pos: 99.97, title: "Internet Age", desc: "Digital revolution", type: "modern" },
            { time: 0, seconds: 0, pos: 100, title: "Present Day", desc: "You are here, reading this", type: "modern" }
        ];

        function createSVGElement(type, attributes = {}) {
            const element = document.createElementNS('http://www.w3.org/2000/svg', type);
            for (const [key, value] of Object.entries(attributes)) {
                element.setAttribute(key, value);
            }
            return element;
        }

        function generateMicrosecondsTimeline() {
            const svg = document.getElementById('microsecondsTimelineSvg');
            if (!svg) {
                console.error('Timeline SVG not found');
                return;
            }
            
            console.log('Generating timeline with', microsecondsEvents.length, 'events');
            
            // Responsive dimensions
            const isMobile = window.innerWidth <= 768;
            const isSmallMobile = window.innerWidth <= 480;
            
            const width = isMobile ? (isSmallMobile ? 380 : 420) : 1000;
            const minHeight = isMobile ? (isSmallMobile ? 800 : 1000) : 2500;
            const height = Math.max(minHeight, microsecondsEvents.length * (isMobile ? 60 : 100));
            const leftMargin = isMobile ? (isSmallMobile ? 40 : 50) : 350;
            const rightMargin = isMobile ? (isSmallMobile ? 40 : 50) : 350;
            const topMargin = isMobile ? 30 : 50;
            const bottomMargin = isMobile ? 50 : 100;
            const lineX = width / 2;
            
            // Calculate scale factor for time
            const oldestTime = 100000; // 100,000 years ago
            const timeRange = oldestTime;
            
            svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
            svg.style.height = `${height}px`;
            
            // Clear existing content
            svg.innerHTML = '';
            
            // Create main timeline line
            const mainLine = createSVGElement('line', {
                x1: lineX,
                y1: topMargin,
                x2: lineX,
                y2: height - bottomMargin,
                class: 'timeline-line'
            });
            svg.appendChild(mainLine);
            
            // Add scale markers at actual time positions
            const scaleMarkers = [
                { time: 100000, label: '0.7s ago', years: '100,000 years ago' },
                { time: 70000, label: '0.49s ago', years: '70,000 years ago' },
                { time: 50000, label: '0.35s ago', years: '50,000 years ago' },
                { time: 15000, label: '0.105s ago', years: '15,000 years ago' },
                { time: 10000, label: '0.07s ago', years: '10,000 years ago' },
                { time: 1000, label: '0.007s ago', years: '1,000 years ago' },
                { time: 0, label: 'NOW', years: 'Present' }
            ];
            
            scaleMarkers.forEach(marker => {
                let scaledPosition;
                if (marker.time === 0) {
                    scaledPosition = 1;
                } else {
                    const sqrtTime = Math.sqrt(marker.time);
                    const maxSqrtTime = Math.sqrt(oldestTime);
                    scaledPosition = 1 - (sqrtTime / maxSqrtTime);
                }
                const y = topMargin + scaledPosition * (height - topMargin - bottomMargin);
                
                // Scale line
                const scaleLine = createSVGElement('line', {
                    x1: lineX - 20,
                    y1: y,
                    x2: lineX + 20,
                    y2: y,
                    stroke: 'var(--cosmic-teal)',
                    'stroke-width': '2',
                    opacity: '0.7'
                });
                svg.appendChild(scaleLine);
                
                // Scale label
                const scaleText = createSVGElement('text', {
                    x: lineX - 30,
                    y: y + 5,
                    'text-anchor': 'end',
                    class: 'event-time'
                });
                scaleText.textContent = marker.label;
                svg.appendChild(scaleText);
            });
            
            // Add events using square root scale for better distribution
            microsecondsEvents.forEach((event, index) => {
                let scaledPosition;
                
                // Use square root scale to give more space to recent events
                // while still showing proper time relationships
                if (event.time === 0) {
                    scaledPosition = 1; // Present at the bottom
                } else {
                    // Square root scale: compresses large times, expands small times
                    const sqrtTime = Math.sqrt(event.time);
                    const maxSqrtTime = Math.sqrt(oldestTime);
                    // Invert so oldest is at top (0) and newest is at bottom (1)
                    scaledPosition = 1 - (sqrtTime / maxSqrtTime);
                }
                
                const y = topMargin + scaledPosition * (height - topMargin - bottomMargin);
                const isLeftSide = index % 2 === 0;
                
                // Create event group
                const eventGroup = createSVGElement('g', {
                    class: 'event-group',
                    transform: `translate(0, ${y})`
                });
                
                // Event circle
                const circle = createSVGElement('circle', {
                    cx: lineX,
                    cy: 0,
                    r: 8,
                    class: `event-circle ${event.type}-event`,
                    'stroke-width': '2'
                });
                eventGroup.appendChild(circle);
                
                // Position text for better readability - both title and time on same side
                const textOffset = isMobile ? (isSmallMobile ? 25 : 35) : 50;
                
                // Both title and time on SAME side, stacked vertically
                const textX = isLeftSide ? lineX - textOffset : lineX + textOffset;
                const textAnchor = isLeftSide ? 'end' : 'start';
                
                // Event title (slightly above center)
                const title = createSVGElement('text', {
                    x: textX,
                    y: -8,
                    'text-anchor': textAnchor,
                    class: 'event-title'
                });
                title.textContent = event.title;
                eventGroup.appendChild(title);
                
                // Time labels stacked below title
                let timeStr, secondsStr;
                if (event.time >= 1000) {
                    timeStr = `${(event.time / 1000).toFixed(0)}k years ago`;
                } else if (event.time > 0) {
                    timeStr = `${event.time} years ago`;
                } else {
                    timeStr = "Present";
                }
                
                if (event.seconds >= 0.1) {
                    secondsStr = `${event.seconds.toFixed(1)}s ago`;
                } else if (event.seconds >= 0.001) {
                    secondsStr = `${(event.seconds * 1000).toFixed(0)}ms ago`;
                } else if (event.seconds > 0) {
                    secondsStr = `${(event.seconds * 1000000).toFixed(0)}μs ago`;
                } else {
                    secondsStr = "Now";
                }
                
                const timeLabel = createSVGElement('text', {
                    x: textX,
                    y: 12,
                    'text-anchor': textAnchor,
                    class: 'event-time'
                });
                timeLabel.textContent = `${timeStr} • ${secondsStr}`;
                eventGroup.appendChild(timeLabel);
                
                // Add hover effect with description
                if (event.desc) {
                    const descTitle = createSVGElement('title');
                    descTitle.textContent = event.desc;
                    eventGroup.appendChild(descTitle);
                }
                
                svg.appendChild(eventGroup);
            });
            
            // Add "Present" marker at bottom
            const presentY = height - bottomMargin;
            const presentMarker = createSVGElement('circle', {
                cx: lineX,
                cy: presentY,
                r: 12,
                fill: 'var(--cosmic-teal)',
                stroke: 'var(--soft-white)',
                'stroke-width': '3'
            });
            svg.appendChild(presentMarker);
            
            const presentText = createSVGElement('text', {
                x: lineX,
                y: presentY + 30,
                'text-anchor': 'middle',
                class: 'event-title',
                style: 'font-size: 16px; fill: var(--cosmic-teal);'
            });
            presentText.textContent = 'PRESENT DAY';
            svg.appendChild(presentText);
        }
        
        // Wait for both DOMContentLoaded and any existing calendar generation
        document.addEventListener('DOMContentLoaded', () => {
            // Small delay to ensure calendar loads first
            setTimeout(generateMicrosecondsTimeline, 100);
        });
        
        // Regenerate timeline on window resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                generateMicrosecondsTimeline();
            }, 250);
        });
    </script>
</body>
</html>